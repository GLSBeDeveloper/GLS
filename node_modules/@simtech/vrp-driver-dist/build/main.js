webpackJsonp([26],{100:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var o=n(2),i=(n(24),function(t){function e(e,n){var o=t.call(this,{platform:n})||this;return o.loadingCtrl=e,o.platform=n,o}return Object(o.__extends)(e,t),e.prototype.show=function(t){var e=this;void 0===t&&(t="Please wait");var n=this.loadingCtrl.create({content:t+"..."}),o=function(){};return n.willEnter.subscribe(function(){return o=e.overwriteBackBtnEvent()}),n.onDidDismiss(function(){return o()}),n.present(),n},e}(n(151).a))},105:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return s});n(2),n(24);var o,i=n(339),r=(n.n(i),n(28)),a=(n(146),n(147),n(25));n(50),n(44);!function(t){t.Android="android",t.iOS="ios"}(o||(o={}));var s=function(){function t(t,e,n,a,s){var u=this;this.appVersion=t,this.diagnostic=e,this.miscApi=n,this.notify=a,this.platform=s,this.hasLocationNotifier=new i.BehaviorSubject(!1),this.platform.ready().then(function(){!0===u.platform.is(o.Android)?u.deviceOS=o.Android:!0===u.platform.is(o.iOS)&&(u.deviceOS=o.iOS);var t=u.platform.versions();u.deviceVersion=Object(r.c)(t[u.deviceOS],"num"),u.diagnostic.registerLocationStateChangeHandler(function(t){u.diagnostic.getLocationAuthorizationStatus().then(function(e){u.hasLocationNotifier.next(!0===(u.deviceOS===o.Android&&t!==u.diagnostic.locationMode.LOCATION_OFF&&e!==u.diagnostic.permissionStatus.NOT_REQUESTED)||!0===(u.deviceOS===o.iOS&&(e===u.diagnostic.permissionStatus.GRANTED||e===u.diagnostic.permissionStatus.GRANTED_WHEN_IN_USE)))})})})}return t.prototype.isAppUpdated=function(){var t=this;return!1===a.a.features.forceAppUpdate?Promise.resolve(!0):this.appVersion.getVersionNumber().then(function(e){return console.log("[DIAGNOSTIC] Current app version "+e),void 0===e||t.miscApi.getLatestAppVersion().then(function(n){return console.log("[DIAGNOSTIC] Latest app version "+n),t.normalizeVersionNum(e)>=t.normalizeVersionNum(n)})}).catch(function(){return!0})},t.prototype.getPackageName=function(){return this.appVersion.getPackageName()},t.prototype.hasLocationPermission=function(){var t=this;return this.diagnostic.isLocationAvailable().then(function(e){return t.hasLocationNotifier.next(e),e}).catch(function(e){return t.catch("location",e)})},t.prototype.hasCameraPermission=function(){var t=this;return this.diagnostic.isCameraAvailable().catch(function(e){return t.catch("camera",e)})},t.prototype.requestLocation=function(){var t=this;this.diagnostic.isLocationAvailable().then(function(e){if(!0!==e)return t.diagnostic.getLocationAuthorizationStatus().then(function(e){t.diagnostic.isLocationEnabled().then(function(n){t.platform.is("android")?n?e!==t.diagnostic.permissionStatus.DENIED&&e!==t.diagnostic.permissionStatus.DENIED_ALWAYS&&e!==t.diagnostic.permissionStatus.NOT_REQUESTED||t.diagnostic.switchToLocationSettings():t.diagnostic.switchToLocationSettings():n?e!==t.diagnostic.permissionStatus.DENIED&&e!==t.diagnostic.permissionStatus.DENIED_ALWAYS&&e!==t.diagnostic.permissionStatus.NOT_REQUESTED||t.diagnostic.switchToSettings():t.notify.info("Please go to Setting >> Privacy >> Location Services to turn on your Location service.")})});t.hasLocationNotifier.next(e),t.notify.info("Location permission is already enabled.")}).catch(function(e){return t.catch("location",e)})},t.prototype.requestCamera=function(){var t=this;this.diagnostic.isCameraAvailable().then(function(e){!0===e?t.notify.info("Camera permission is already enabled."):t.diagnostic.requestCameraAuthorization()}).catch(function(e){return t.catch("camera",e)})},t.prototype.catch=function(t,e){return void 0===t&&this.notify.error("Unable to check "+t+" permission details "+e),!0},t.prototype.normalizeVersionNum=function(t){var e=Number(Object(r.l)(t).replace(/\./g,""));return isNaN(e)?0:e},t}()},151:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var o=n(24),i=n(28),r=n(25),a=function(){function t(t){this.navOptions={animate:!1,updateUrl:!1},this.app=t.app,this.platform=t.platform,Object(i.c)(t.navCtrl,"parent")?this.tabsNav=t.navCtrl.parent:this.rootNav=t.navCtrl}return t.prototype.goPage=function(t,e){void 0===e&&(e={}),!0===this.canNavigate()&&this.rootNav.push(t,e,this.navOptions)},t.prototype.goPreviousPage=function(t){void 0===t&&(t=0),!0===this.canNavigate()&&(0===t?this.rootNav.pop(this.navOptions):this.rootNav.popTo(this.rootNav.getByIndex(this.rootNav.length()-t),this.navOptions))},t.prototype.goHomePage=function(t){void 0===t&&(t={}),!0===this.canNavigate()&&(console.log("[NAVIGATION] Going to "+r.a.home.page),this.rootNav.setRoot(r.a.home.page,t,this.navOptions))},t.prototype.goLoginPage=function(t){void 0===t&&(t={}),!0===this.canNavigate()&&(console.log("[NAVIGATION] Going to "+r.a.login.page),this.rootNav.setRoot(r.a.login.page,t,this.navOptions))},t.prototype.exitApp=function(){this.platform.exitApp()},t.prototype.overwriteBackBtnEvent=function(t){return void 0===t&&(t=function(){}),this.platform?this.platform.registerBackButtonAction(t,10):(console.log("[WARN] platform is not initialised. Failed to disable back button."),function(){})},t.prototype.goNextTab=function(){if(this.tabsNav instanceof o.a){var t=this.tabsNav.getByIndex(this.tabsNav.getSelected().index+1);if(t&&t.show)return t.enabled=!0,this.tabsNav.select(t,this.navOptions),!0}else console.log("[WARN] There is no tab to navigate to. Failed to go next tab.");return!1},t.prototype.canNavigate=function(){return!this.rootNav&&Object(i.c)(this.app,"getRootNav")&&(this.rootNav=this.app.getRootNav()),!!this.rootNav},t}()},160:function(t,e,n){"use strict";n.d(e,"a",function(){return s});n(2),n(150);var o=n(28),i=(n(24),n(70)),r=n(338),a=(n(105),n(91),n(49),function(){var t={};return t[t.Success=0]="Success",t[t.Fail=1]="Fail",t}()),s=function(){function t(t,e,n,o,i){this.base64=t,this.diagnostic=e,this.driver=n,this.geolocation=o,this.modalCtrl=i,this.inputByBarcode=!1,this.items=[],this.notePhotos=[],this.verified=!1,this.podSignatureData=[]}return t.prototype.initItems=function(t){var e=this;void 0===t&&(t=!1);var n=this.getDetails(),o=!1;!0!==t&&0!==this.items.length||(this.inputByBarcode=!1,o=!0),this.items=n.DeliveryItems.map(function(t){var n=t.Id,i=t.ItemId,r=t.ItemQty,a=t.ActualItemQty,s=a,u=[];if(!1===o){var c=e.items.find(function(t){return t.name===i});u=c?c.scanned:[],s=c?c.actual:a}return{id:n,name:i,expected:r,actual:s,scanned:u}})},t.prototype.initNotes=function(t){if(void 0===t&&(t=!1),!0===t||!this.noteOption&&!this.noteText){var e=this.getDetails();if(e.NoteFromDriver.length>0){var n=e.NoteFromDriver.find(function(t){return t.key===r.a.Option});this.noteOption=Object(o.c)(n,"value");var i=e.NoteFromDriver.find(function(t){return t.key===r.a.FreeText});this.noteText=Object(o.c)(i,"value")}this.notePhotos=[]}},t.prototype.getDetails=function(){var t=this;if(void 0!==this.id)return this.driver.jobs.find(function(e){return e.Id===t.id})},t.prototype.setSuccess=function(t){this.id=t,this.action=this.action?this.action:a.Success},t.prototype.setFail=function(t){this.id=t,this.action=this.action?this.action:a.Fail},t.prototype.isSuccess=function(){return this.action===a.Success},t.prototype.complete=function(){var t=this,e=this.getDetails();return!1===this.isItemsValid(e)?Promise.reject("invalid_items"):!1===this.driver.isPreviousJobComplete(e)?Promise.reject("Please ensure the previous pickup job has been completed first."):this.diagnostic.hasLocationPermission().then(function(e){return!0===e?t.constructRequest():new Promise(function(e,n){var o=t.modalCtrl.create("AppPermissionPage",{},{enableBackdropDismiss:!1});o.onDidDismiss(function(){return t.constructRequest().then(e).catch(n)}),o.present()})}).then(function(e){return t.driver.jobAttempt(e)}).then(function(){return t.reset()})},t.prototype.reset=function(){this.id=void 0,this.action=void 0,this.inputByBarcode=!1,this.items=[],this.noteOption=void 0,this.noteText=void 0,this.notePhotos=[],this.verified=!1,this.podSignature=void 0,this.podSignatureData=[],this.podPhoto=void 0},t.prototype.constructRequest=function(){var t=this;return console.log("[ATTEMPT] Getting location"),Promise.all([this.convertPhotosToBase64(),this.geolocation.getCurrentLocation().catch(function(){})]).then(function(e){var n=e[0],a=e[1];console.log("[ATTEMPT] Current position is",a);var s=[];return t.noteOption&&s.push(new r.b({key:r.a.Option,value:t.noteOption})),t.noteText&&s.push(new r.b({key:r.a.FreeText,value:t.noteText})),!0===t.isSuccess()&&s.push(new r.b({key:r.a.InputMethod,value:t.inputByBarcode?"Barcode":"Text"})),a&&s.push(new r.b({key:r.a.CurrentPosition,value:{lat:Object(o.c)(a,"coords.latitude"),lng:Object(o.c)(a,"coords.longitude"),accuracy:Object(o.c)(a,"coords.accuracy")}})),new i.a({jobId:t.id,delivered:t.isSuccess(),note:s,notePhotosB64:n.notePhotos,items:t.items.map(function(t){return{Id:t.id,ActualItemQty:t.actual}}),signatureB64:t.podSignature,photoB64:n.podPhoto})})},t.prototype.isItemsValid=function(t){return!1===this.isSuccess()||this.items.length===t.DeliveryItems.length&&this.items.every(function(e){return!!t.DeliveryItems.find(function(t){return t.Id===e.id&&t.ItemQty===e.expected})})},t.prototype.convertPhotosToBase64=function(){var t=this,e=[this.podPhoto].concat(this.notePhotos);return Promise.all(e.map(function(e){return t.fileToB64(e)})).then(function(t){return{podPhoto:t[0],notePhotos:t.slice(1)}})},t.prototype.fileToB64=function(t){return(t=Object(o.l)(t))?this.base64.encodeFile(t).catch(function(t){if("cordova_not_available"===t)return"";throw t}):Promise.resolve("")},t}()},167:function(t,e,n){"use strict";n.d(e,"a",function(){return a});n(2),n(148),n(149);var o=n(24),i=n(28),r=n(25),a=(n(44),function(){function t(t,e,n){this.camera=t,this.notify=e,this.scanner=n,this.cameraOptions={quality:50,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,sourceType:this.camera.PictureSourceType.CAMERA,mediaType:this.camera.MediaType.PICTURE,allowEdit:!0,targetWidth:1200,targetHeight:1200,saveToPhotoAlbum:!1,correctOrientation:!0},this.scanOptions={preferFrontCamera:!1,showFlipCameraButton:!0,showTorchButton:!0,torchOn:!1,disableAnimations:!0,disableSuccessBeep:!0,formats:r.a.setting.item.acceptedCodes,resultDisplayDuration:0,prompt:"Press back button to cancel"}}return t.prototype.getPicture=function(){var t=this;return this.camera.getPicture(this.cameraOptions).then(function(t){return Object(o.b)(t)}).catch(function(e){throw"No Image Selected"!==e&&"cordova_not_available"!==e&&t.notify.error(e),e})},t.prototype.scanBarcode=function(t){var e=this;void 0===t&&(t=!1);var n=t?{formats:"QR_CODE"}:{},o=Object.assign({},this.scanOptions,n);return this.scanner.scan(o).then(function(t){if(!0===t.cancelled)throw new Error("cancelled");return t}).catch(function(t){throw"Error: cancelled"!==t.toString()&&e.notify.error(Object(i.c)(t,"text","Unable to scan.")),t})},t}())},190:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=190},212:function(t,e,n){function o(t){var e=i[t];return e?n.e(e[1]).then(function(){return n(e[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}var i={"../pages/all-jobs/all-jobs.module.ngfactory":[416,1],"../pages/all-jobs/next-day-jobs/next-day-jobs.module.ngfactory":[417,9],"../pages/all-jobs/planner-notes/planner-notes.module.ngfactory":[418,8],"../pages/app-permission/app-permission.module.ngfactory":[419,25],"../pages/complete-job-details/complete-job-details.module.ngfactory":[420,4],"../pages/current-job/add-note/add-note.module.ngfactory":[421,0],"../pages/current-job/current-job.module.ngfactory":[422,5],"../pages/current-job/items-handled/items-handled.module.ngfactory":[423,7],"../pages/current-job/pod/pod-photo/pod-photo.module.ngfactory":[424,12],"../pages/current-job/pod/pod-signature/pod-signature.module.ngfactory":[425,13],"../pages/current-job/pod/pod.module.ngfactory":[426,11],"../pages/current-job/pod/verify-code/verify-code.module.ngfactory":[427,20],"../pages/current-job/summary/summary.module.ngfactory":[428,3],"../pages/customer-service/customer-service.module.ngfactory":[429,6],"../pages/home/home.module.ngfactory":[430,2],"../pages/item-details/item-details.module.ngfactory":[431,19],"../pages/login/check-app-version/check-app-version.module.ngfactory":[432,24],"../pages/login/licence-agreement/licence-agreement.module.ngfactory":[433,23],"../pages/login/login.module.ngfactory":[434,16],"../pages/login/scan-server-url/scan-server-url.module.ngfactory":[435,15],"../pages/settings/change-driver-details/change-driver-details.module.ngfactory":[436,18],"../pages/settings/logout/logout.module.ngfactory":[437,22],"../pages/settings/offline-job-modal/offline-job-modal.module.ngfactory":[438,14],"../pages/settings/offline-sync/offline-sync.module.ngfactory":[439,21],"../pages/settings/reset-password/reset-password.module.ngfactory":[440,17],"../pages/settings/settings.module.ngfactory":[441,10]};o.keys=function(){return Object.keys(i)},o.id=212,t.exports=o},25:function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return r}),n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var o,i=n(70);(o||(o={})).AllJobs="allJobsMenu";var r;!function(t){t.Eula="eula",t.Url="url",t.Username="username",t.ApiToken="token",t.PreviousJobsInfo="previousJobsInfo"}(r||(r={}));var a,s,u=function(){var t={};return t[t.Keyboard=0]="Keyboard",t[t.Barcode=1]="Barcode",t}(),c=function(){function t(){}return Object.defineProperty(t,"url",{get:function(){return t._url},set:function(e){t._url=e?e.replace(/[\/\\]+$/,""):""},enumerable:!0,configurable:!0}),t.defaultUrl="http://localhost",t._url=t.defaultUrl,t.default={url:t.defaultUrl,apiHeader:"x-access-token",setApiHeader:!0},t.login={page:"LoginPage",image:{path:"/android_asset/www/assets/images/logo_company.png",height:"70px"}},t.home={page:"HomePage",title:"SIMTech MCT <sup>TM</sup>"},t.features={forceAppUpdate:!0,showEula:!1,showChangeUrl:!0,showAllJobsMenu:!0,showPodPhotoTab:!0,showChangePassword:!0,showChangeDriverInfo:!0,showJobsMail:!0,showJobsReorderBtn:!0,enableSSLPinning:!1,enableWebsocket:!0,enableGeoTracking:!0,enableOfflineSync:!0},t.user={username:"",token:"",previousJobsInfo:""},t.jobStatusPair=(a={},a[i.c.Pending]={title:"Pending",color:"blue"},a[i.c.Late]={title:"Late",color:"orange"},a[i.c.Ontime]={title:"Ontime",color:"green"},a[i.c.Unsuccessful]={title:"Unsuccessful",color:"red"},a[i.c.ExpectToBeLate]={title:"Expect Late",color:"purple"},a),t.jobTypePair=(s={},s[i.d.Pickup]={title:"PICKUP",color:"orange"},s[i.d.Delivery]={title:"DELIVERY",color:"blue"},s),t.setting={note:{maxNumPhoto:3,optionRequired:!1,options:["No problem","Incomplete order","Customer unavailable","Damaged product"]},pod:{photoRequired:!1},item:{defaultInput:u.Keyboard,allowSwitchInput:!0,acceptedCodes:"DATA_MATRIX,UPC_A,UPC_E,EAN_8,EAN_13,CODE_39,CODE_128,ITF"}},t}()},338:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r});var o,i=n(28);!function(t){t.Option="Template",t.FreeText="Comments",t.InputMethod="Input Items By",t.CurrentPosition="ActualDeliveryLocation"}(o||(o={}));var r=function(){function t(t){Object.assign(this,t)}return Object.defineProperty(t.prototype,"key",{get:function(){return this._key},set:function(t){this._key=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){"string"==typeof t&&(t=Object(i.l)(t).replace(/(\r\n|\n|\r)/gm,". ")),this._value=t},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{key:this._key,value:this.value}},t.prototype.toString=function(){var t=this._value?this._value:"-";if(!0===this.isJson(this._value)){t="";for(var e in this._value)t+="("+e+") "+this._value[e]+". "}return this._key+": "+t},t.prototype.isJson=function(t){return t instanceof Object&&t.constructor===Object},t}()},370:function(t,e,n){"use strict";function o(t){return new d.a(t,"./assets/i18n/",".json")}function i(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,0,null,null,9,"button",[["class","item item-block"],["detail-none",""],["ion-item",""]],null,[[null,"tap"]],function(t,e,n){var o=!0;if("tap"===e){o=!1!==t.component.btnOpenPage(t.context.$implicit)&&o}return o},Z.b,Z.a)),s["ɵdid"](1,1097728,null,3,Q.a,[$.a,tt.a,s.ElementRef,s.Renderer,[2,et.a]],null,null),s["ɵqud"](335544320,4,{contentLabel:0}),s["ɵqud"](603979776,5,{_buttons:1}),s["ɵqud"](603979776,6,{_icons:1}),s["ɵdid"](5,16384,null,0,nt.a,[],null,null),(t()(),s["ɵted"](-1,2,["\n                "])),(t()(),s["ɵeld"](7,0,null,0,1,"ion-icon",[["item-left",""],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](8,147456,[[6,4]],0,ot.a,[tt.a,s.ElementRef,s.Renderer],{name:[0,"name"]},null),(t()(),s["ɵted"](9,2,["\n                ","\n            "]))],function(t,e){t(e,8,0,e.context.$implicit.icon)},function(t,e){t(e,7,0,s["ɵnov"](e,8)._hidden);t(e,9,0,e.context.$implicit.title)})}function r(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,0,null,null,41,"ion-menu",[["persistent","true"],["role","navigation"],["side","right"]],null,null,null,it.b,it.a)),s["ɵprd"](6144,null,rt.a,null,[at.a]),s["ɵdid"](2,245760,null,2,at.a,[st.a,s.ElementRef,tt.a,ut.a,s.Renderer,ct.a,lt.l,dt.a,pt.a],{content:[0,"content"],id:[1,"id"],side:[2,"side"],persistent:[3,"persistent"]},null),s["ɵqud"](335544320,1,{menuContent:0}),s["ɵqud"](335544320,2,{menuNav:0}),(t()(),s["ɵted"](-1,0,["\n\n    "])),(t()(),s["ɵeld"](6,0,null,0,23,"ion-header",[],null,null,null,null,null)),s["ɵdid"](7,16384,null,0,ht.a,[tt.a,s.ElementRef,s.Renderer,[2,ft.a]],null,null),(t()(),s["ɵted"](-1,null,["\n        "])),(t()(),s["ɵeld"](9,0,null,null,19,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,gt.b,gt.a)),s["ɵdid"](10,49152,null,0,mt.a,[tt.a,s.ElementRef,s.Renderer],null,null),(t()(),s["ɵted"](-1,3,["\n            "])),(t()(),s["ɵeld"](12,0,null,3,2,"ion-title",[],null,null,null,bt.b,bt.a)),s["ɵdid"](13,49152,null,0,yt.a,[tt.a,s.ElementRef,s.Renderer,[2,mt.a],[2,vt.a]],null,null),(t()(),s["ɵted"](-1,0,["Menu"])),(t()(),s["ɵted"](-1,3,["\n            "])),(t()(),s["ɵeld"](16,0,null,2,11,"ion-buttons",[["right",""]],null,null,null,null,null)),s["ɵdid"](17,16384,null,1,jt.a,[tt.a,s.ElementRef,s.Renderer,[2,mt.a],[2,vt.a]],null,null),s["ɵqud"](603979776,3,{_buttons:1}),(t()(),s["ɵted"](-1,null,["\n                "])),(t()(),s["ɵeld"](20,0,null,null,6,"button",[["clear",""],["ion-button",""]],null,[[null,"click"]],function(t,e,n){var o=!0;if("click"===e){o=!1!==s["ɵnov"](t,22).close()&&o}return o},Pt.b,Pt.a)),s["ɵdid"](21,1097728,[[3,4]],0,Ot.a,[[8,""],tt.a,s.ElementRef,s.Renderer],{clear:[0,"clear"]},null),s["ɵdid"](22,16384,null,0,St.a,[st.a],{menuClose:[0,"menuClose"]},null),(t()(),s["ɵted"](-1,0,["\n                    "])),(t()(),s["ɵeld"](24,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](25,147456,null,0,ot.a,[tt.a,s.ElementRef,s.Renderer],{name:[0,"name"]},null),(t()(),s["ɵted"](-1,0,["\n                "])),(t()(),s["ɵted"](-1,null,["\n            "])),(t()(),s["ɵted"](-1,3,["\n        "])),(t()(),s["ɵted"](-1,null,["\n    "])),(t()(),s["ɵted"](-1,0,["\n\n    "])),(t()(),s["ɵeld"](31,0,null,0,9,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,wt.b,wt.a)),s["ɵdid"](32,4374528,[[1,4]],0,Tt.a,[tt.a,ut.a,dt.a,s.ElementRef,s.Renderer,pt.a,ct.a,s.NgZone,[2,ft.a],[2,Nt.a]],null,null),(t()(),s["ɵted"](-1,1,["\n        "])),(t()(),s["ɵeld"](34,0,null,1,5,"ion-list",[],null,null,null,null,null)),s["ɵdid"](35,16384,null,0,It.a,[tt.a,s.ElementRef,s.Renderer,ut.a,lt.l,dt.a],null,null),(t()(),s["ɵted"](-1,null,["\n            "])),(t()(),s["ɵand"](16777216,null,null,1,null,i)),s["ɵdid"](38,802816,null,0,Ct.i,[s.ViewContainerRef,s.TemplateRef,s.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),s["ɵted"](-1,null,["\n        "])),(t()(),s["ɵted"](-1,1,["\n    "])),(t()(),s["ɵted"](-1,0,["\n\n"])),(t()(),s["ɵted"](-1,null,["\n\n"])),(t()(),s["ɵeld"](43,0,null,null,2,"ion-nav",[],null,null,null,Et.b,Et.a)),s["ɵprd"](6144,null,rt.a,null,[At.a]),s["ɵdid"](45,4374528,[["content",4]],0,At.a,[[2,ft.a],[2,Nt.a],pt.a,tt.a,ut.a,s.ElementRef,s.NgZone,s.Renderer,s.ComponentFactoryResolver,lt.l,Dt.a,[2,kt.a],dt.a,s.ErrorHandler],null,null),(t()(),s["ɵted"](-1,null,["\n"]))],function(t,e){var n=e.component;t(e,2,0,s["ɵnov"](e,45),n.allJobsMenuId,"right","true");t(e,21,0,"");t(e,22,0,n.allJobsMenuId);t(e,25,0,"close");t(e,38,0,n.allJobsMenuPages)},function(t,e){t(e,9,0,s["ɵnov"](e,10)._sbPadding);t(e,24,0,s["ɵnov"](e,25)._hidden);t(e,31,0,s["ɵnov"](e,32).statusbarPadding,s["ɵnov"](e,32)._hasRefresher)})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(41),s=n(0),u=n(2),c=n(116),l=n(69),d=n(397),p=(n(24),n(146)),h=n(148),f=n(149),g=n(150),m=n(147),b=n(129),y=n(97),v=n(177),j=n(127),P=n(60),O=n(152),S=n(128),w=n(98),T=n(99),N=(n(369),n(25)),I=n(58),C=n(68),E=n(51),A=n(49),D=function(t){function e(e,n,o,i,r,a,s,u,c,l,d,p){var h=t.call(this,{app:e,platform:u})||this;return h.app=e,h.auth=n,h.driver=o,h.keyboard=i,h.menuCtrl=r,h.http=a,h.network=s,h.platform=u,h.statusBar=c,h.storage=l,h.splashScreen=d,h.translate=p,h.allJobsMenuId=N.c.AllJobs,h.allJobsMenuPages=[{name:"AllJobsPage",title:"Today's Jobs",icon:"checkmark-circle"},{name:"PlannerNotesPage",title:"Planner Notes",icon:"list"},{name:"NextDayJobsPage",title:"Next Day Jobs",icon:"calendar"}],h.initializeApp(),h}return Object(u.__extends)(e,t),e.prototype.initializeApp=function(){var t=this;this.platform.ready().then(function(){return t.splashScreen.show()}).then(function(){return t.storage.init()}).then(function(){t.http.setRequestTimeout(5),t.http.setDataSerializer("json");return t.http.setSSLCertMode(N.a.features.enableSSLPinning?"pinned":"default").catch(function(){})}).then(function(){t.translate.addLangs(["en"]),t.translate.setDefaultLang("en")}).then(function(){return t.auth.isLoggedIn().catch(function(){return t.auth.notifier.next(!1)})}).then(function(){t.menuCtrl.enable(!1,t.allJobsMenuId),t.keyboard.onKeyboardShow().subscribe(function(){return document.body.classList.add("keyboard-is-open")}),t.keyboard.onKeyboardHide().subscribe(function(){return document.body.classList.remove("keyboard-is-open")}),t.setStatusBar(),t.network.onDisconnect().subscribe(function(){return t.setStatusBar()}),t.network.onConnect().subscribe(function(){t.setStatusBar(),t.auth.isLoggedIn()}),t.splashScreen.hide()}),this.auth.notifier.distinctUntilChanged().subscribe(function(e){!0===e?setTimeout(function(){return t.goHomePage()}):!1===e&&setTimeout(function(){return t.goLoginPage()})}),this.platform.is("ios")&&this.platform.resume.subscribe(function(){return t.auth.isLoggedIn()})},e.prototype.btnOpenPage=function(t){this.goPage(t.name)},e.prototype.btnMainPage=function(){this.goHomePage()},e.prototype.setStatusBar=function(){this.statusBar.backgroundColorByName("none"===this.network.type?"red":"black")},e}(n(151).a),k=n(50),J=n(167),_=n(160),L=n(105),R=n(91),B=n(100),U=n(44),F=n(92),M=function(){return function(){}}(),x=n(62),q=n(357),V=n(358),H=n(359),G=n(360),K=n(361),W=n(362),z=n(363),X=n(364),Y=n(365),Z=n(156),Q=n(18),$=n(16),tt=n(3),et=n(47),nt=n(71),ot=n(46),it=n(413),rt=n(35),at=n(89),st=n(29),ut=n(5),ct=n(31),lt=n(7),dt=n(10),pt=n(9),ht=n(102),ft=n(6),gt=n(414),mt=n(42),bt=n(367),yt=n(72),vt=n(40),jt=n(106),Pt=n(45),Ot=n(23),St=n(124),wt=n(366),Tt=n(27),Nt=n(26),It=n(57),Ct=n(13),Et=n(415),At=n(66),Dt=n(34),kt=n(17),Jt=s["ɵcrt"]({encapsulation:2,styles:[],data:{}}),_t=s["ɵccf"]("ng-component",D,function(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,r,Jt)),s["ɵdid"](1,49152,null,0,D,[pt.a,I.a,A.a,y.a,st.a,C.a,P.a,ut.a,w.a,E.a,T.a,l.k],null,null)],null,null)},{},{},[]),Lt=n(131),Rt=n(21),Bt=n(120),Ut=n(101),Ft=n(130),Mt=n(36),xt=n(123),qt=n(157),Vt=n(64),Ht=n(48),Gt=n(104),Kt=n(85),Wt=n(137),zt=n(133),Xt=n(142),Yt=n(356),Zt=n(132),Qt=n(125),$t=n(134),te=s["ɵcmf"](M,[x.b],function(t){return s["ɵmod"]([s["ɵmpd"](512,s.ComponentFactoryResolver,s["ɵCodegenComponentFactoryResolver"],[[8,[q.a,V.a,H.a,G.a,K.a,W.a,z.a,X.a,Y.a,_t]],[3,s.ComponentFactoryResolver],s.NgModuleRef]),s["ɵmpd"](5120,s.LOCALE_ID,s["ɵq"],[[3,s.LOCALE_ID]]),s["ɵmpd"](4608,Ct.l,Ct.k,[s.LOCALE_ID,[2,Ct.t]]),s["ɵmpd"](5120,s.APP_ID,s["ɵi"],[]),s["ɵmpd"](5120,s.IterableDiffers,s["ɵn"],[]),s["ɵmpd"](5120,s.KeyValueDiffers,s["ɵo"],[]),s["ɵmpd"](4608,a.c,a.q,[Ct.c]),s["ɵmpd"](6144,s.Sanitizer,null,[a.c]),s["ɵmpd"](4608,a.f,Lt.a,[]),s["ɵmpd"](5120,a.d,function(t,e,n,o,i){return[new a.k(t,e),new a.o(n),new a.n(o,i)]},[Ct.c,s.NgZone,Ct.c,Ct.c,a.f]),s["ɵmpd"](4608,a.e,a.e,[a.d,s.NgZone]),s["ɵmpd"](135680,a.m,a.m,[Ct.c]),s["ɵmpd"](4608,a.l,a.l,[a.e,a.m]),s["ɵmpd"](6144,s.RendererFactory2,null,[a.l]),s["ɵmpd"](6144,a.p,null,[a.m]),s["ɵmpd"](4608,s.Testability,s.Testability,[s.NgZone]),s["ɵmpd"](4608,a.h,a.h,[Ct.c]),s["ɵmpd"](4608,a.i,a.i,[Ct.c]),s["ɵmpd"](4608,c.h,c.n,[Ct.c,s.PLATFORM_ID,c.l]),s["ɵmpd"](4608,c.o,c.o,[c.h,c.m]),s["ɵmpd"](5120,c.a,function(t){return[t]},[c.o]),s["ɵmpd"](4608,c.k,c.k,[]),s["ɵmpd"](6144,c.i,null,[c.k]),s["ɵmpd"](4608,c.g,c.g,[c.i]),s["ɵmpd"](6144,c.b,null,[c.g]),s["ɵmpd"](4608,c.f,c.j,[c.b,s.Injector]),s["ɵmpd"](4608,c.c,c.c,[c.f]),s["ɵmpd"](4608,Rt.t,Rt.t,[]),s["ɵmpd"](4608,Rt.d,Rt.d,[]),s["ɵmpd"](5120,l.g,o,[c.c]),s["ɵmpd"](4608,l.c,l.e,[]),s["ɵmpd"](4608,l.i,l.d,[]),s["ɵmpd"](4608,l.b,l.a,[]),s["ɵmpd"](4608,l.n,l.n,[]),s["ɵmpd"](4608,l.k,l.k,[l.n,l.g,l.c,l.i,l.b,l.l,l.m]),s["ɵmpd"](4608,Bt.a,Bt.a,[pt.a,tt.a]),s["ɵmpd"](4608,Ut.a,Ut.a,[pt.a,tt.a]),s["ɵmpd"](4608,Ft.a,Ft.a,[]),s["ɵmpd"](4608,$.a,$.a,[]),s["ɵmpd"](4608,Mt.a,Mt.a,[ut.a]),s["ɵmpd"](4608,ct.a,ct.a,[tt.a,ut.a,s.NgZone,dt.a]),s["ɵmpd"](4608,xt.a,xt.a,[pt.a,tt.a]),s["ɵmpd"](5120,Ct.g,qt.c,[Ct.r,[2,Ct.a],tt.a]),s["ɵmpd"](4608,Ct.f,Ct.f,[Ct.g]),s["ɵmpd"](5120,Vt.b,Vt.d,[pt.a,Vt.a]),s["ɵmpd"](5120,kt.a,kt.b,[pt.a,Vt.b,Ct.f,Ht.b,s.ComponentFactoryResolver]),s["ɵmpd"](4608,Gt.a,Gt.a,[pt.a,tt.a,kt.a]),s["ɵmpd"](4608,Kt.a,Kt.a,[pt.a,tt.a]),s["ɵmpd"](4608,Wt.a,Wt.a,[pt.a,tt.a,kt.a]),s["ɵmpd"](4608,zt.a,zt.a,[tt.a,ut.a,dt.a,pt.a,lt.l]),s["ɵmpd"](4608,Xt.a,Xt.a,[pt.a,tt.a]),s["ɵmpd"](4608,Dt.a,Dt.a,[ut.a,tt.a]),s["ɵmpd"](4608,h.a,h.a,[]),s["ɵmpd"](4608,j.a,j.a,[]),s["ɵmpd"](4608,U.a,U.a,[Xt.a,j.a]),s["ɵmpd"](4608,f.a,f.a,[]),s["ɵmpd"](4608,J.a,J.a,[h.a,U.a,f.a]),s["ɵmpd"](4608,p.a,p.a,[]),s["ɵmpd"](4608,m.a,m.a,[]),s["ɵmpd"](4608,P.a,P.a,[]),s["ɵmpd"](4608,C.a,C.a,[c.c,s.Injector,P.a,ut.a]),s["ɵmpd"](4608,k.e,k.e,[C.a]),s["ɵmpd"](4608,L.a,L.a,[p.a,m.a,k.e,U.a,ut.a]),s["ɵmpd"](4608,R.a,R.a,[ut.a]),s["ɵmpd"](4608,B.a,B.a,[xt.a,ut.a]),s["ɵmpd"](4608,S.a,S.a,[]),s["ɵmpd"](4608,E.a,E.a,[S.a]),s["ɵmpd"](4608,k.a,k.a,[C.a]),s["ɵmpd"](4608,k.b,k.b,[C.a]),s["ɵmpd"](4608,k.c,k.c,[C.a]),s["ɵmpd"](4608,k.d,k.d,[C.a]),s["ɵmpd"](4608,k.f,k.f,[C.a]),s["ɵmpd"](4608,F.b,F.b,[]),s["ɵmpd"](4608,A.a,A.a,[Ut.a,R.a,k.c,B.a,U.a,E.a,k.f,F.b]),s["ɵmpd"](4608,I.a,I.a,[k.a,A.a,U.a,E.a,F.b]),s["ɵmpd"](4608,g.a,g.a,[]),s["ɵmpd"](4608,_.a,_.a,[g.a,L.a,A.a,R.a,Gt.a]),s["ɵmpd"](4608,b.a,b.a,[]),s["ɵmpd"](4608,y.a,y.a,[]),s["ɵmpd"](4608,v.a,v.a,[]),s["ɵmpd"](4608,O.a,O.a,[]),s["ɵmpd"](4608,w.a,w.a,[]),s["ɵmpd"](4608,T.a,T.a,[]),s["ɵmpd"](512,Ct.b,Ct.b,[]),s["ɵmpd"](512,s.ErrorHandler,Yt.a,[]),s["ɵmpd"](256,tt.b,{tabsPlacement:"top",tabsHideOnSubPages:!0,scrollAssist:!1,autoFocusAssist:!1,activator:"highlight"},[]),s["ɵmpd"](1024,Zt.a,Zt.b,[]),s["ɵmpd"](1024,ut.a,ut.b,[a.b,Zt.a,s.NgZone]),s["ɵmpd"](1024,tt.a,tt.c,[tt.b,ut.a]),s["ɵmpd"](512,dt.a,dt.a,[ut.a]),s["ɵmpd"](512,st.a,st.a,[]),s["ɵmpd"](512,pt.a,pt.a,[tt.a,ut.a,[2,st.a]]),s["ɵmpd"](512,lt.l,lt.l,[pt.a]),s["ɵmpd"](256,Vt.a,{links:[{loadChildren:"../pages/all-jobs/all-jobs.module.ngfactory#AllJobsPageModuleNgFactory",name:"AllJobsPage",segment:"all-jobs",priority:"low",defaultHistory:[]},{loadChildren:"../pages/all-jobs/next-day-jobs/next-day-jobs.module.ngfactory#NextDayJobsPageModuleNgFactory",name:"NextDayJobsPage",segment:"next-day-jobs",priority:"low",defaultHistory:[]},{loadChildren:"../pages/all-jobs/planner-notes/planner-notes.module.ngfactory#PlannerNotesPageModuleNgFactory",name:"PlannerNotesPage",segment:"planner-notes",priority:"low",defaultHistory:[]},{loadChildren:"../pages/app-permission/app-permission.module.ngfactory#AppPermissionPageModuleNgFactory",name:"AppPermissionPage",segment:"app-permission",priority:"low",defaultHistory:[]},{loadChildren:"../pages/complete-job-details/complete-job-details.module.ngfactory#CompleteJobDetailsPageModuleNgFactory",name:"CompleteJobDetailsPage",segment:"complete-job-details",priority:"low",defaultHistory:[]},{loadChildren:"../pages/current-job/add-note/add-note.module.ngfactory#AddNotePageModuleNgFactory",name:"AddNotePage",segment:"add-note",priority:"low",defaultHistory:[]},{loadChildren:"../pages/current-job/current-job.module.ngfactory#CurrentJobPageModuleNgFactory",name:"CurrentJobPage",segment:"current-job",priority:"low",defaultHistory:[]},{loadChildren:"../pages/current-job/items-handled/items-handled.module.ngfactory#ItemsHandledPageModuleNgFactory",name:"ItemsHandledPage",segment:"items-handled",priority:"low",defaultHistory:[]},{loadChildren:"../pages/current-job/pod/pod-photo/pod-photo.module.ngfactory#PodPhotoPageModuleNgFactory",name:"PodPhotoPage",segment:"pod-photo",priority:"low",defaultHistory:[]},{loadChildren:"../pages/current-job/pod/pod-signature/pod-signature.module.ngfactory#PodSignaturePageModuleNgFactory",name:"PodSignaturePage",segment:"pod-signature",priority:"low",defaultHistory:[]},{loadChildren:"../pages/current-job/pod/pod.module.ngfactory#PodPageModuleNgFactory",name:"PodPage",segment:"pod",priority:"low",defaultHistory:[]},{loadChildren:"../pages/current-job/pod/verify-code/verify-code.module.ngfactory#VerifyCodePageModuleNgFactory",name:"VerifyCodePage",segment:"verify-code",priority:"low",defaultHistory:[]},{loadChildren:"../pages/current-job/summary/summary.module.ngfactory#SummaryPageModuleNgFactory",name:"SummaryPage",segment:"summary",priority:"low",defaultHistory:[]},{loadChildren:"../pages/customer-service/customer-service.module.ngfactory#CustomerServicePageModuleNgFactory",name:"CustomerServicePage",segment:"customer-service",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/home.module.ngfactory#HomePageModuleNgFactory",name:"HomePage",segment:"home",priority:"low",defaultHistory:[]},{loadChildren:"../pages/item-details/item-details.module.ngfactory#ItemDetailsPageModuleNgFactory",name:"ItemDetailsPage",segment:"item-details",priority:"low",defaultHistory:[]},{loadChildren:"../pages/login/check-app-version/check-app-version.module.ngfactory#CheckAppVersionPageModuleNgFactory",name:"CheckAppVersionPage",segment:"check-app-version",priority:"low",defaultHistory:[]},{loadChildren:"../pages/login/licence-agreement/licence-agreement.module.ngfactory#LicenceAgreementPageModuleNgFactory",name:"LicenceAgreementPage",segment:"licence-agreement",priority:"low",defaultHistory:[]},{loadChildren:"../pages/login/login.module.ngfactory#LoginPageModuleNgFactory",name:"LoginPage",segment:"login",priority:"low",defaultHistory:[]},{loadChildren:"../pages/login/scan-server-url/scan-server-url.module.ngfactory#ScanServerUrlPageModuleNgFactory",name:"ScanServerUrlPage",segment:"scan-server-url",priority:"low",defaultHistory:[]},{loadChildren:"../pages/settings/change-driver-details/change-driver-details.module.ngfactory#ChangeDriverDetailsPageModuleNgFactory",name:"ChangeDriverDetailsPage",segment:"change-driver-details",priority:"low",defaultHistory:[]},{loadChildren:"../pages/settings/logout/logout.module.ngfactory#LogoutPageModuleNgFactory",name:"LogoutPage",segment:"logout",priority:"low",defaultHistory:[]},{loadChildren:"../pages/settings/offline-job-modal/offline-job-modal.module.ngfactory#OfflineJobModalPageModuleNgFactory",name:"OfflineJobModalPage",segment:"offline-job-modal",priority:"low",defaultHistory:[]},{loadChildren:"../pages/settings/offline-sync/offline-sync.module.ngfactory#OfflineSyncPageModuleNgFactory",name:"OfflineSyncPage",segment:"offline-sync",priority:"low",defaultHistory:[]},{loadChildren:"../pages/settings/reset-password/reset-password.module.ngfactory#ResetPasswordPageModuleNgFactory",name:"ResetPasswordPage",segment:"reset-password",priority:"low",defaultHistory:[]},{loadChildren:"../pages/settings/settings.module.ngfactory#SettingPageModuleNgFactory",name:"SettingPage",segment:"settings",priority:"low",defaultHistory:[]}]},[]),s["ɵmpd"](512,s.Compiler,s.Compiler,[]),s["ɵmpd"](512,Qt.a,Qt.a,[s.Compiler]),s["ɵmpd"](1024,Ht.b,Ht.c,[Qt.a,s.Injector]),s["ɵmpd"](1024,s.APP_INITIALIZER,function(t,e,n,o,i,r,s,u,c,l,d,p,h){return[a.s(t),$t.a(e),Ft.b(n,o),zt.b(i,r,s,u,c),Ht.d(l,d,p,h)]},[[2,s.NgProbeToken],tt.a,ut.a,dt.a,tt.a,ut.a,dt.a,pt.a,lt.l,tt.a,Vt.a,Ht.b,s.NgZone]),s["ɵmpd"](512,s.ApplicationInitStatus,s.ApplicationInitStatus,[[2,s.APP_INITIALIZER]]),s["ɵmpd"](131584,s.ApplicationRef,s.ApplicationRef,[s.NgZone,s["ɵConsole"],s.Injector,s.ErrorHandler,s.ComponentFactoryResolver,s.ApplicationInitStatus]),s["ɵmpd"](512,s.ApplicationModule,s.ApplicationModule,[s.ApplicationRef]),s["ɵmpd"](512,a.a,a.a,[[3,a.a]]),s["ɵmpd"](512,c.e,c.e,[]),s["ɵmpd"](512,c.d,c.d,[]),s["ɵmpd"](512,l.h,l.h,[]),s["ɵmpd"](512,Rt.r,Rt.r,[]),s["ɵmpd"](512,Rt.j,Rt.j,[]),s["ɵmpd"](512,Rt.p,Rt.p,[]),s["ɵmpd"](512,qt.a,qt.a,[]),s["ɵmpd"](512,M,M,[]),s["ɵmpd"](256,c.l,"XSRF-TOKEN",[]),s["ɵmpd"](256,c.m,"X-XSRF-TOKEN",[]),s["ɵmpd"](256,l.m,void 0,[]),s["ɵmpd"](256,l.l,void 0,[]),s["ɵmpd"](256,x.a,D,[]),s["ɵmpd"](256,Ct.a,"/",[])])});Object(s.enableProdMode)(),Object(a.j)().bootstrapModuleFactory(te).catch(function(t){return console.error(t)})},405:function(t,e,n){function o(t){return n(i(t))}function i(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var r={"./af":215,"./af.js":215,"./ar":216,"./ar-dz":217,"./ar-dz.js":217,"./ar-kw":218,"./ar-kw.js":218,"./ar-ly":219,"./ar-ly.js":219,"./ar-ma":220,"./ar-ma.js":220,"./ar-sa":221,"./ar-sa.js":221,"./ar-tn":222,"./ar-tn.js":222,"./ar.js":216,"./az":223,"./az.js":223,"./be":224,"./be.js":224,"./bg":225,"./bg.js":225,"./bm":226,"./bm.js":226,"./bn":227,"./bn.js":227,"./bo":228,"./bo.js":228,"./br":229,"./br.js":229,"./bs":230,"./bs.js":230,"./ca":231,"./ca.js":231,"./cs":232,"./cs.js":232,"./cv":233,"./cv.js":233,"./cy":234,"./cy.js":234,"./da":235,"./da.js":235,"./de":236,"./de-at":237,"./de-at.js":237,"./de-ch":238,"./de-ch.js":238,"./de.js":236,"./dv":239,"./dv.js":239,"./el":240,"./el.js":240,"./en-au":241,"./en-au.js":241,"./en-ca":242,"./en-ca.js":242,"./en-gb":243,"./en-gb.js":243,"./en-ie":244,"./en-ie.js":244,"./en-il":245,"./en-il.js":245,"./en-nz":246,"./en-nz.js":246,"./eo":247,"./eo.js":247,"./es":248,"./es-do":249,"./es-do.js":249,"./es-us":250,"./es-us.js":250,"./es.js":248,"./et":251,"./et.js":251,"./eu":252,"./eu.js":252,"./fa":253,"./fa.js":253,"./fi":254,"./fi.js":254,"./fo":255,"./fo.js":255,"./fr":256,"./fr-ca":257,"./fr-ca.js":257,"./fr-ch":258,"./fr-ch.js":258,"./fr.js":256,"./fy":259,"./fy.js":259,"./gd":260,"./gd.js":260,"./gl":261,"./gl.js":261,"./gom-latn":262,"./gom-latn.js":262,"./gu":263,"./gu.js":263,"./he":264,"./he.js":264,"./hi":265,"./hi.js":265,"./hr":266,"./hr.js":266,"./hu":267,"./hu.js":267,"./hy-am":268,"./hy-am.js":268,"./id":269,"./id.js":269,"./is":270,"./is.js":270,"./it":271,"./it.js":271,"./ja":272,"./ja.js":272,"./jv":273,"./jv.js":273,"./ka":274,"./ka.js":274,"./kk":275,"./kk.js":275,"./km":276,"./km.js":276,"./kn":277,"./kn.js":277,"./ko":278,"./ko.js":278,"./ky":279,"./ky.js":279,"./lb":280,"./lb.js":280,"./lo":281,"./lo.js":281,"./lt":282,"./lt.js":282,"./lv":283,"./lv.js":283,"./me":284,"./me.js":284,"./mi":285,"./mi.js":285,"./mk":286,"./mk.js":286,"./ml":287,"./ml.js":287,"./mn":288,"./mn.js":288,"./mr":289,"./mr.js":289,"./ms":290,"./ms-my":291,"./ms-my.js":291,"./ms.js":290,"./mt":292,"./mt.js":292,"./my":293,"./my.js":293,"./nb":294,"./nb.js":294,"./ne":295,"./ne.js":295,"./nl":296,"./nl-be":297,"./nl-be.js":297,"./nl.js":296,"./nn":298,"./nn.js":298,"./pa-in":299,"./pa-in.js":299,"./pl":300,"./pl.js":300,"./pt":301,"./pt-br":302,"./pt-br.js":302,"./pt.js":301,"./ro":303,"./ro.js":303,"./ru":304,"./ru.js":304,"./sd":305,"./sd.js":305,"./se":306,"./se.js":306,"./si":307,"./si.js":307,"./sk":308,"./sk.js":308,"./sl":309,"./sl.js":309,"./sq":310,"./sq.js":310,"./sr":311,"./sr-cyrl":312,"./sr-cyrl.js":312,"./sr.js":311,"./ss":313,"./ss.js":313,"./sv":314,"./sv.js":314,"./sw":315,"./sw.js":315,"./ta":316,"./ta.js":316,"./te":317,"./te.js":317,"./tet":318,"./tet.js":318,"./tg":319,"./tg.js":319,"./th":320,"./th.js":320,"./tl-ph":321,"./tl-ph.js":321,"./tlh":322,"./tlh.js":322,"./tr":323,"./tr.js":323,"./tzl":324,"./tzl.js":324,"./tzm":325,"./tzm-latn":326,"./tzm-latn.js":326,"./tzm.js":325,"./ug-cn":327,"./ug-cn.js":327,"./uk":328,"./uk.js":328,"./ur":329,"./ur.js":329,"./uz":330,"./uz-latn":331,"./uz-latn.js":331,"./uz.js":330,"./vi":332,"./vi.js":332,"./x-pseudo":333,"./x-pseudo.js":333,"./yo":334,"./yo.js":334,"./zh-cn":335,"./zh-cn.js":335,"./zh-hk":336,"./zh-hk.js":336,"./zh-tw":337,"./zh-tw.js":337};o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=405},44:function(t,e,n){"use strict";n.d(e,"a",function(){return i});n(2),n(24),n(127);var o=n(28),i=function(){function t(t,e){this.toastCtrl=t,this.localNotifications=e,this.maxCharacters=254,this.toastOptions={showCloseButton:!0,position:"top",duration:3e3}}return t.prototype.error=function(t,e){console.log("[TOAST] Error:",t,e);var n=Object(o.j)(t);return Object(o.d)(n,"Error")||(n="Error: "+n),void 0!==e&&(n+="\n\nServer Error: ",e instanceof Error?n+=e.toString():n+=JSON.stringify(e)),this.show({message:n,duration:this.toastOptions.duration+3e3})},t.prototype.info=function(t){return this.show({message:JSON.stringify(t)})},t.prototype.success=function(t){return console.log("[TOAST] Success:",t),this.show({message:"Success: "+t})},t.prototype.local=function(t){this.localNotifications.schedule({title:"Logistics",text:t,priority:2,launch:!0,clock:!0,lockscreen:!0,smallIcon:"res://logo",color:"#1f7bb6"})},t.prototype.show=function(t){if(t.message=Object(o.l)(t.message),t.message){var e=t.message.substring(0,this.maxCharacters);t.message=e+=e===t.message?"":"..."}return this.toastCtrl.create(Object.assign({},this.toastOptions,t)).present()},t}()},49:function(t,e,n){"use strict";n.d(e,"a",function(){return u});n(2),n(24);var o=n(28),i=n(1),r=(n.n(i),n(25)),a=n(70),s=(n(91),n(100),n(44),n(51),n(92)),u=(n(50),function(){function t(t,e,n,o,i,r,a,s){this.alertCtrl=t,this.geolocation=e,this.jobsApi=n,this.loading=o,this.notify=i,this.storage=r,this.vehicleApi=a,this.websocket=s,this.jobs=[],this.isSyncing=!1,this.DATE_FORMAT="DD/MM/YYYY"}return t.prototype.initDriver=function(t){var e=this;return this.name=t.fullname,this.vehicleId=t.vehicleId,this.vehiclePlateNumber=t.vehiclePlateNumber,this.vehicleUserGroup=t.vehicleUserGroup,this.geolocation.start(this.vehicleId,this.vehiclePlateNumber,this.vehicleUserGroup),this.initWebsocketEvents(),this.overwriteGlobals(t),this.getJobsFromServer().then(function(){return e.uploadOfflineJobs().catch(function(){})})},t.prototype.resetDriver=function(){this.name=void 0,this.vehicleId=void 0,this.vehiclePlateNumber=void 0,this.vehicleUserGroup=void 0,this.jobs=[],this.currentJob=void 0,this.geolocation.stop()},t.prototype.jobAttempt=function(t){var e=this,n=i();return this.uploadOfflineJobs().catch(function(t){console.log("[ATTEMPT] Ignoring error from upload offline jobs before attempt",t)}).then(function(){var o=e.jobsApi.attempt(t).then(function(t){return e.onUpdateJob(t)});return!1===r.a.features.enableOfflineSync?o:(console.log("[ATTEMPT] Saving job into database "+t.jobId),e.storage.insertJob({jobId:t.jobId,attemptedByDriver:e.name,attemptedByVehicle:e.vehiclePlateNumber,delivered:t.delivered,deliveryTime:n.toISOString(),signatureB64:t.signatureB64,photoB64:t.photoB64,notePhotosB64:t.notePhotosB64,note:t.note,items:t.items}).then(function(i){var r=e.jobs.find(function(e){return e.Id===t.jobId});e.onUpdateJob({Id:t.jobId,Status:r.estimateStatus(t.delivered,n.toISOString()),ActualDeliveryTime:n.toDate(),NoteFromDriver:t.note}),o.then(function(){return e.storage.deleteJob(i)}).catch(function(t){return console.log("[ATTEMPT] Failed to send request to server",t)})}).catch(function(){return o}))})},t.prototype.getOfflineJobs=function(){return!1===r.a.features.enableOfflineSync?Promise.reject("Offline sync feature is not enabled."):this.storage.getAllJobs().then(function(t){return t.map(function(t){return new a.a(t)})})},t.prototype.uploadOfflineJobs=function(){var t=this;return!1===r.a.features.enableOfflineSync?Promise.reject("Offline sync feature is not enabled."):(console.log("Uploading offline jobs"),!0===this.isSyncing?this.notify.error("Currently uploading data to server. Please try again 5 minutes later.").then(function(){}):(this.isSyncing=!0,this.getOfflineJobs().then(function(e){return t.isSyncing=!1,e.length>0?t.jobsApi.sync(e).then(function(){return t.getJobsFromServer()}).then(function(){t.storage.deleteAllJobs()}):Promise.resolve()}).catch(function(e){throw t.isSyncing=!1,e})))},t.prototype.updateCurrentJob=function(){this.currentJob=this.jobs.find(function(t){return t.isPending()})},t.prototype.updatePlatenumber=function(t){return this.vehicleApi.update(this.vehicleId,{PlateNumber:t})},t.prototype.isPreviousJobComplete=function(t){return!0===t.isPickup()||!this.jobs.find(function(e){return e.DeliveryMasterId===t.DeliveryMasterId&&e.Id!==t.Id&&e.isPickup()&&e.JobSequence<=t.JobSequence&&!e.isCompleted()})},t.prototype.getJobsFromServer=function(t){var e=this;void 0===t&&(t="Updating jobs");var n=this.loading.show(t),a=i().toISOString(),s=!1,u=r.a.user.previousJobsInfo,c=u?u.split(","):[],l=c[0],d=void 0===l?"":l,p=c[1],h=void 0===p?"":p;return this.jobsApi.get({date:a}).then(function(t){if(t.length!==Number(d)&&i(h,e.DATE_FORMAT).isSame(i(),"day"))s=!0;else if(e.jobs.length>0)for(var a=0;a<t.length;a++){if(!Object(o.b)(e.jobs,{Id:t[a].Id})){s=!0;break}}if(e.jobs=t.sort(function(t,e){return t.EngineRouteSeqNum<e.EngineRouteSeqNum?-1:1}),e.updateCurrentJob(),n.dismiss(),s){var u="Updated jobs list for today";e.notify.local(u),e.notify.info(u)}r.a.user.previousJobsInfo=t.length.toString()+","+i().format(e.DATE_FORMAT),e.storage.setKeyValue(r.d.PreviousJobsInfo,r.a.user.previousJobsInfo)}).catch(function(t){n.dismiss();throw e.alertCtrl.create({title:"Error",subTitle:"Unable to get updated job list.<br>Please log out and log in again. Server Error: "+t,buttons:["OK"]}).present(),t})},t.prototype.overwriteGlobals=function(t){t.statusLabels.forEach(function(t){var e=r.a.jobStatusPair[t.value];e&&(e.title=Object(o.a)(t.label))}),r.a.setting.note.maxNumPhoto=t.noteOptions.photo.maxCount,r.a.setting.note.optionRequired=t.noteOptions.option.required,r.a.setting.note.options=t.noteOptions.option.list,r.a.setting.pod.photoRequired=t.podOptions.photo.required,r.a.setting.item.defaultInput="BARCODE"===t.itemOptions.input.default?r.b.Barcode:r.b.Keyboard,r.a.setting.item.allowSwitchInput=t.itemOptions.input.allowToggle,r.a.setting.item.acceptedCodes=t.itemOptions.barcode.formats},t.prototype.initWebsocketEvents=function(){var t=this;this.websocket.onJSON(s.a.Vehicle,function(e){e.purpose!==s.c.Update&&e.purpose!==s.c.Create||e.data.forEach(function(e){return t.onUpdateVehicle(e)})}),this.websocket.onJSON(s.a.DeliveryPlan,function(e){if(e.purpose===s.c.Update||e.purpose===s.c.Create){e.data.indexOf(i().format("YYYY-MM-DD"))>-1&&t.getJobsFromServer()}}),this.websocket.onJSON(s.a.DeliveryMaster,function(e){e.purpose===s.c.Delete&&t.onDeleteJob(e.data)}),this.websocket.onJSON(s.a.DeliveryDetail,function(e){e.purpose!==s.c.Update&&e.purpose!==s.c.Attempted||e.data.forEach(function(e){return t.onUpdateJob(e)})}),this.websocket.onJSON(s.a.DeliveryItem,function(e){if(e.purpose===s.c.Create){var n=Number(e.data[0].DeliveryDetailId);t.onUpdateJob({Id:n,DeliveryItems:e.data})}else e.purpose===s.c.Delete&&e.data.forEach(function(e){var n=Number(e.DeliveryDetailId),o=t.jobs.find(function(t){return t.Id===n}).DeliveryItems;t.onUpdateJob({Id:n,DeliveryItems:o.filter(function(t){return e.Ids.indexOf(t.Id)<0})})})})},t.prototype.onUpdateVehicle=function(t){var e=this.vehicleId;this.vehicleId=t.Id,this.vehiclePlateNumber=t.PlateNumber,this.vehicleUserGroup=t.UserGroup,e!==this.vehicleId&&(console.log("[WEBSOCKET] Changed vehicle assignment from "+e+" to "+this.vehicleId),this.getJobsFromServer("Updating jobs due to change of vehicle...")),this.geolocation.start(this.vehicleId,this.vehiclePlateNumber,this.vehicleUserGroup)},t.prototype.onUpdateJob=function(t){t.Id=Number(t.Id);var e=this.jobs.find(function(e){return e.Id===t.Id});Object.assign(e,t),!0===e.isUnsuccessful()&&!0===e.isPickup()&&this.jobs.forEach(function(t){e.DeliveryMasterId===t.DeliveryMasterId&&e.JobSequence<=t.JobSequence&&t.isDelivery()&&t.isPending()&&(t.Status=a.c.Unsuccessful)}),!1===Object(o.e)(this.currentJob,e.Id)&&this.updateCurrentJob()},t.prototype.onDeleteJob=function(t){var e=this,n=!1;Object(o.h)(this.jobs,function(o){if(t.indexOf(o.DeliveryMasterId)>-1)return e.notify.info("Job "+o.DeliveryMasterId+" ("+o.JobType+") has been removed."),!n&&t.indexOf(e.currentJob.DeliveryMasterId)>-1&&(n=!0),!0}),n&&this.updateCurrentJob()},t}())},50:function(t,e,n){"use strict";n(2),n(0);var o=n(28),i=(n(68),n(70)),r=function(){function t(t){Object.assign(this,t)}return Object.defineProperty(t.prototype,"Id",{get:function(){return this._Id},set:function(t){this._Id=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Weight",{get:function(){return this._Weight},set:function(t){this._Weight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Description",{get:function(){return this._Description},set:function(t){this._Description=t},enumerable:!0,configurable:!0}),t}(),a=n(25),s=function(){return function(t){this.forceChangePassword=!1,this.noteOptions={option:{required:a.a.setting.note.optionRequired,list:a.a.setting.note.options},photo:{maxCount:a.a.setting.note.maxNumPhoto}},this.podOptions={photo:{required:a.a.setting.pod.photoRequired}},this.itemOptions={input:{default:a.a.setting.item.defaultInput===a.b.Barcode?"BARCODE":"TEXT",allowToggle:a.a.setting.item.allowSwitchInput},barcode:{formats:a.a.setting.item.acceptedCodes}},this.statusLabels=[],Object.assign(this,t)}}();n.d(e,"a",function(){return c}),n.d(e,"c",function(){return l}),n.d(e,"b",function(){return d}),n.d(e,"f",function(){return p}),n.d(e,"e",function(){return h}),n.d(e,"d",function(){return f});var u=function(){function t(){}return t.catch=function(t){throw 0===t.status?new Error("Invalid URL. Error: "+t.error):-1===t.status&&t.error?t.error.split("Exception: ").pop():t.error},t}(),c=function(){function t(t){this.http=t}return t.prototype.isLoggedIn=function(){return this.http.get("web/auth/v2/isLoggedIn").then(function(t){return new s(t)}).catch(u.catch)},t.prototype.resetPassword=function(t){return void 0===t&&(t={}),this.http.put("api/auth/v2/password",t).catch(u.catch)},t.prototype.login=function(t){return void 0===t&&(t={}),this.http.post("api/auth/v2/login",t).then(function(t){return new s(t)}).catch(function(t){var e=t.error;throw 401===t.status?e="Incorrect username or password.":0===t.status||404===t.status?e="Please check that the server URL is valid.":-1===t.status&&t.error?e="Unable to log in. "+t.error.split("Exception: ").pop():"string"!=typeof e&&(e="Unable to log in. "+JSON.stringify(e)),e})},t.prototype.logout=function(){return this.http.post("api/auth/v2/logout",{}).catch(u.catch)},t}(),l=function(){function t(t){this.http=t}return t.prototype.get=function(t){return void 0===t&&(t={}),this.http.get("web/data/v2.1/job",t).then(function(t){return Object(o.g)(t,function(t){return new i.b(t)})}).catch(u.catch)},t.prototype.attempt=function(t){return this.http.put("api/data/v2.1/job/"+t.jobId+"/attemptB64",t.withBase64()).catch(u.catch)},t.prototype.sync=function(t){return void 0===t&&(t=[]),this.http.post("api/data/v2.1/job/syncB64",Object(o.g)(t,function(t){return t.withBase64()})).catch(u.catch)},t.prototype.getPodPhotos=function(t){return this.http.get("web/data/v2.1/pod/"+t).catch(u.catch)},t.prototype.getNotePhotos=function(t){return this.http.get("web/data/v2.1/note/"+t).catch(u.catch)},t}(),d=function(){function t(t){this.http=t}return t.prototype.get=function(t){return this.http.get("web/data/v2.1/item/"+t).then(function(t){return new r(t)}).catch(u.catch)},t}(),p=function(){function t(t){this.http=t}return t.prototype.update=function(t,e){return this.http.put("api/data/v2.1/vehicle/"+t,{newValues:e}).catch(u.catch)},t}(),h=function(){function t(t){this.http=t}return t.prototype.getLatestAppVersion=function(){return this.http.get("web/data/v2.1/misc/app/version",{},{"Content-Type":"application/text"}).catch(u.catch)},t}(),f=function(){function t(t){this.http=t}return t.prototype.send=function(t){return this.http.post("api/message/v2",t).catch(u.catch)},t}()},51:function(t,e,n){"use strict";n(2),n(0),n(128);var o=n(25),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(){function t(t,e,n,o){this.name=t,this.version=e,this.db=n,this.columns=o}return t.prototype.sqlCreate=function(){var t="CREATE TABLE IF NOT EXISTS "+this.name+" ("+this.getSchema()+")";return this.db.executeSql(t,[]).then(function(){return!0})},t.prototype.sqlDrop=function(){return this.db.executeSql("DROP TABLE IF EXISTS "+this.name,[]).then(function(){return!0})},t.prototype.getFirstRow=function(t){return t.rows.length>0?t.rows.item(0):void 0},t.prototype.getAllRows=function(t){for(var e=[],n=0;n<t.rows.length;n++)e.push(t.rows.item(n));return e},t.prototype.getInsertedId=function(t){if(t.rowsAffected>0)return t.insertId;throw new Error("Unable to store record in database")},t.prototype.getRowsAffected=function(t){return t.rowsAffected},t.prototype.getSchema=function(){return this.columns.map(function(t){return t.getSchema()}).join(",")},t}(),a=function(){function t(t,e,n){this.name=t,this.type=e,this.isJSON=!1,this.isBase64=!1,this.isPrimaryKey=!1,Object.assign(this,n)}return t.prototype.getSchema=function(){return this.name+" "+this.type+" "+(this.isPrimaryKey?"PRIMARY KEY":"")},t}(),s=function(t){function e(e){return t.call(this,"jobs",1,e,[new a("jobId","INTEGER"),new a("attemptedByDriver","TEXT"),new a("attemptedByVehicle","TEXT"),new a("delivered","BOOLEAN"),new a("deliveryTime","TEXT"),new a("signatureB64","TEXT",{isBase64:!0}),new a("photoB64","TEXT",{isBase64:!0}),new a("notePhotosB64","TEXT",{isJSON:!0,isBase64:!0}),new a("note","TEXT",{isJSON:!0}),new a("items","TEXT",{isJSON:!0})])||this}return i(e,t),e.prototype.sqlSelect=function(){return this.db.executeSql("SELECT * FROM "+this.name,[]).then(this.getAllRows)},e.prototype.sqlInsert=function(t){var e=[],n=[];for(var o in t)e.push(o),n.push(t[o]instanceof Object?JSON.stringify(t[o]):t[o]);var i="INSERT INTO "+this.name+" ("+e.join(",")+") VALUES ("+n.map(function(){return"?"})+")";return this.db.executeSql(i,n).then(this.getInsertedId)},e.prototype.sqlDelete=function(t){return this.db.executeSql("DELETE FROM "+this.name+" WHERE rowId = ?",[t]).then(function(t){return t.rowsAffected})},e.prototype.sqlDeleteAll=function(){return this.db.executeSql("DELETE FROM "+this.name,[]).then(function(t){return t.rowsAffected})},e}(r),u=function(t){function e(e){return t.call(this,"keyvalue",1,e,[new a("key","TEXT",{isPrimaryKey:!0}),new a("value","TEXT")])||this}return i(e,t),e.prototype.sqlGetValue=function(t){return this.db.executeSql("SELECT value FROM "+this.name+" WHERE key = ?",[t]).then(this.getFirstRow).then(function(t){return t?t.value:void 0})},e.prototype.sqlSetValue=function(t,e){return this.db.executeSql("INSERT OR REPLACE INTO "+this.name+" VALUES (?, ?)",[t,e]).then(this.getRowsAffected)},e}(r);n.d(e,"a",function(){return c});var c=function(){function t(t){this.sqlite=t,this.databaseName="simtech.opms.lml"}return t.prototype.init=function(){var t=this;return this.sqlite.create({name:this.databaseName,location:"default"}).then(function(e){return t.tableKeyVal=new u(e),t.tableJobs=new s(e),t.createTables()}).then(function(){return o.a.features.showChangeUrl?t.getKeyValue(o.d.Url).then(function(t){void 0!==t&&(o.a.url=t)}):t.setKeyValue(o.d.Url,o.a.default.url).then(function(){})}).then(function(){return t.getKeyValue(o.d.ApiToken).then(function(t){void 0!==t&&(o.a.user.token=t)})}).then(function(){return t.getKeyValue(o.d.Username).then(function(t){void 0!==t&&(o.a.user.username=t)})}).then(function(){return t.getKeyValue(o.d.PreviousJobsInfo).then(function(t){void 0!==t&&(o.a.user.previousJobsInfo=t)})}).catch(function(){})},t.prototype.insertJob=function(t){return void 0===this.tableJobs?Promise.reject("Tables are not initialised"):this.tableJobs.sqlInsert(t)},t.prototype.getAllJobs=function(){var t=this;return void 0===this.tableJobs?Promise.reject("Tables are not initialised"):this.tableJobs.sqlSelect().then(function(e){return e.map(function(e){return e.delivered=t.toBool(e.delivered),e.notePhotosB64=t.toJSON(e.notePhotosB64),e.note=t.toJSON(e.note),e.items=t.toJSON(e.items),e})})},t.prototype.deleteAllJobs=function(){return void 0===this.tableJobs?Promise.reject("Tables are not initialised"):this.tableJobs.sqlDeleteAll()},t.prototype.deleteJob=function(t){return void 0===this.tableJobs?Promise.reject("Tables are not initialised"):this.tableJobs.sqlDelete(t)},t.prototype.setKeyValue=function(t,e){return void 0===this.tableKeyVal?Promise.resolve(void 0):this.tableKeyVal.sqlSetValue(t,e)},t.prototype.getKeyValue=function(t){return void 0===this.tableKeyVal?Promise.resolve(void 0):this.tableKeyVal.sqlGetValue(t)},t.prototype.toJSON=function(t){try{return JSON.parse(t)}catch(e){return t}},t.prototype.toBool=function(t){return"true"===t||!0===t},t.prototype.createTables=function(){var t=this;return this.tableKeyVal.sqlCreate().then(function(){return t.tableKeyVal.sqlGetValue(t.tableJobs.name)}).then(function(e){if(console.log("[SQL] Current jobs table database version "+e),void 0===e||Number(e)<Number(t.tableJobs.version))return console.log("[SQL] Updating jobs table to version "+t.tableJobs.version),t.tableJobs.sqlDrop().then(function(){return t.tableJobs.sqlCreate()}).then(function(){return t.tableKeyVal.sqlSetValue(t.tableJobs.name,String(t.tableJobs.version))})}).then(function(){})},t}()},58:function(t,e,n){"use strict";n.d(e,"a",function(){return u});n(2);var o=n(339),i=(n.n(o),n(28)),r=n(1),a=(n.n(r),n(25)),s=(n(50),n(44),n(49),n(51),n(92)),u=function(){function t(t,e,n,i,r){this.authApi=t,this.driver=e,this.notify=n,this.storage=i,this.websocket=r,this.notifier=new o.BehaviorSubject(void 0),this.forceChangePassword=!1}return t.prototype.login=function(t,e){var n=this;return this.authApi.login({username:t,password:e}).then(function(t){return n.initUser(t)}).catch(function(t){throw n.resetUser(),t})},t.prototype.logout=function(){var t=this;return void 0===this.username?(this.notifier.next(!1),Promise.resolve()):this.authApi.logout().then(function(){t.resetUser()}).catch(function(){t.resetUser()})},t.prototype.isLoggedIn=function(){var t=this;return this.authApi.isLoggedIn().then(function(e){return t.initUser(e)}).catch(function(e){throw t.resetUser(),e})},t.prototype.changePassword=function(t,e){return this.authApi.resetPassword({oldPassword:t,newPassword:e})},t.prototype.initUser=function(t){a.a.user.token=t.token,this.storage.setKeyValue(a.d.ApiToken,a.a.user.token),a.a.user.username=t.username,this.username=a.a.user.username,this.storage.setKeyValue(a.d.Username,a.a.user.username),this.forceChangePassword=t.forceChangePassword,this.synchroniseDate(t.serverDate),this.initWebsocketEvents(),this.driver.initDriver(t),this.notifier.next(!0)},t.prototype.resetUser=function(){a.a.user.token="",a.a.user.previousJobsInfo="",this.storage.setKeyValue(a.d.ApiToken,""),this.storage.setKeyValue(a.d.PreviousJobsInfo,""),this.username=void 0,this.websocket.disconnect(),this.driver.resetDriver(),this.notifier.next(!1)},t.prototype.synchroniseDate=function(t){if(t=Object(i.l)(t)){var e=new Date(t).getTime()-Date.now();r.now=function(){return e+Date.now()}}},t.prototype.initWebsocketEvents=function(){var t=this;this.websocket.connect(),this.websocket.onJSON(s.a.Logout,function(){t.notify.error("You are forced to log out. You will be redirected to login page."),t.resetUser()})},t}()},68:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var o,i=n(2),r=n(129),a=n(25),s=n(58);n(60),n(24);!function(t){t.GET="get",t.POST="post",t.PUT="put"}(o||(o={}));var u=function(t){function e(e,n,o,i){var r=t.call(this)||this;return r.http=e,r.injector=n,r.network=o,r.platform=i,r.useNativeHttp=!1,r.useNativeHttp=r.platform.is("ios")||r.platform.is("android"),console.log("[API] Using Native HTTP "+r.useNativeHttp),r}return Object(i.__extends)(e,t),e.prototype.get=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),this.sendRequestToServer(o.GET,[t,e,n])},e.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.sendRequestToServer(o.POST,[t,e,n])},e.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.sendRequestToServer(o.PUT,[t,e,n])},e.prototype.sendRequestToServer=function(e,n){var i=this,r=a.a.url,u=n[0],c=n[1]||{},l=n[2]||{};!0===a.a.default.setApiHeader&&((f={})[a.a.default.apiHeader]=a.a.user.token,l=f);var d=r+"/"+u;if(console.log("[API] Sending request to "+d,c,l),"none"===this.network.type)return Promise.reject({error:"Internet is required."});var p;if(this.useNativeHttp)p=t.prototype[e].call(this,d,c,l);else{var h={withCredentials:!0,headers:l};p=e===o.GET?this.http.get(d,Object.assign({params:c},h)).toPromise():this.http[e.toString()](d,c,h).toPromise()}return p.then(function(t){console.log("[API] Success "+d,t);try{return JSON.parse(t.data)}catch(e){return t}}).catch(function(t){if(console.log("[API] Error "+d,t),i.useNativeHttp)try{t.error=JSON.parse(t.error)}catch(t){}else t.error=t.message,t.status=-1;if(401===t.status){i.injector.get(s.a).logout()}throw t});var f},e}(r.a)},70:function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var o,i=n(1),r=(n.n(i),n(28)),a=n(338);!function(t){t[t.Pending=1]="Pending",t[t.Late=2]="Late",t[t.Ontime=3]="Ontime",t[t.Unsuccessful=4]="Unsuccessful",t[t.ExpectToBeLate=5]="ExpectToBeLate"}(o||(o={}));var s;!function(t){t.Pickup="PICKUP",t.Delivery="DELIVERY"}(s||(s={}));var u=function(){function t(t){Object.assign(this,t)}return Object.defineProperty(t.prototype,"Id",{get:function(){return this._Id},set:function(t){this._Id=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DeliveryMasterId",{get:function(){return this._DeliveryMasterId},set:function(t){this._DeliveryMasterId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"JobType",{get:function(){return this._JobType},set:function(t){this._JobType=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Status",{get:function(){return this._Status},set:function(t){this._Status=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Address",{get:function(){return this._Address},set:function(t){this._Address=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Postal",{get:function(){return this._Postal},set:function(t){this._Postal=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Lat",{get:function(){return this._Lat},set:function(t){this._Lat=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Lng",{get:function(){return this._Lng},set:function(t){this._Lng=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ContactName",{get:function(){return this._ContactName},set:function(t){this._ContactName=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ContactPhone",{get:function(){return this._ContactPhone},set:function(t){this._ContactPhone=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"JobSequence",{get:function(){return this._JobSequence},set:function(t){this._JobSequence=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EngineRouteSeqNum",{get:function(){return this._EngineRouteSeqNum},set:function(t){this._EngineRouteSeqNum=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StartTimeWindow",{get:function(){return this._StartTimeWindow},set:function(t){this._StartTimeWindow=t?i(t).toDate():void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EndTimeWindow",{get:function(){return this._EndTimeWindow},set:function(t){this._EndTimeWindow=t?i(t).toDate():void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ActualDeliveryTime",{get:function(){return this._ActualDeliveryTime},set:function(t){this._ActualDeliveryTime=t?i(t).toDate():void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NoteFromPlanner",{get:function(){return this._NoteFromPlanner},set:function(t){this._NoteFromPlanner=this.initNotes(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NoteFromDriver",{get:function(){return this._NoteFromDriver},set:function(t){this._NoteFromDriver=this.initNotes(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DeliveryItems",{get:function(){return this._DeliveryItems},set:function(t){this._DeliveryItems=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VerificationCode",{get:function(){return this._VerificationCode},set:function(t){this._VerificationCode=this.initVerificationCode(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"UserGroup",{get:function(){return this._UserGroup},set:function(t){this._UserGroup=t},enumerable:!0,configurable:!0}),t.prototype.estimateStatus=function(t,e){return void 0===t&&(t=!1),!1===t?o.Unsuccessful:i(this.EndTimeWindow).isAfter(i(e))?o.Ontime:o.Late},t.prototype.toJSON=function(){return{Id:this._Id,DeliveryMasterId:this._DeliveryMasterId,JobType:this._JobType,Status:this._Status,Address:this._Address,Postal:this._Postal,Lat:this._Lat,Lng:this._Lng,ContactName:this._ContactName,ContactPhone:this._ContactPhone,JobSequence:this._JobSequence,StartTimeWindow:this._StartTimeWindow,EndTimeWindow:this._EndTimeWindow,NoteFromPlanner:JSON.stringify(Object(r.g)(this._NoteFromPlanner,function(t){return t.toJSON()})),NoteFromDriver:JSON.stringify(Object(r.g)(this._NoteFromDriver,function(t){return t.toJSON()})),UserGroup:this._UserGroup}},t.prototype.isPickup=function(){return this.JobType===s.Pickup},t.prototype.isDelivery=function(){return this.JobType===s.Delivery},t.prototype.isPending=function(){return this.Status===o.Pending||this.Status===o.ExpectToBeLate},t.prototype.isUnsuccessful=function(){return this.Status===o.Unsuccessful},t.prototype.isCompleted=function(){return!this.isPending()&&!this.isUnsuccessful()},t.prototype.hasVerificationCode=function(){return!!this._VerificationCode},t.prototype.verifyCode=function(t){return Object(r.k)(Object(r.l)(t))===Object(r.k)(Object(r.l)(this._VerificationCode.Code))},t.prototype.initNotes=function(t){return void 0===t&&(t=[]),t=Object(r.f)(t)?[]:t,Object(r.g)(t,function(t){return new a.b(t)})},t.prototype.initVerificationCode=function(t){return t&&"string"==typeof t?{Code:t}:t},t}(),c=function(){function t(t){var e=this;Object.assign(this,t),this.signature=this.b64ToBlob(this.signatureB64),this.photo=this.b64ToBlob(this.photoB64),this.notePhotos=Object(r.g)(this.notePhotosB64,function(t){return e.b64ToBlob(t)}),void 0!==t.note&&t.note.length&&(this.note=Object(r.g)(t.note,function(t){return new a.b(t)}))}return t.prototype.withBase64=function(){var t=this;return Object.assign({notePhotos:Object(r.g)(this.notePhotosB64,function(e){return t.trimB64Uri(e)}),signature:this.trimB64Uri(this.signatureB64),photo:this.trimB64Uri(this.photoB64)},this.getJobDetails())},t.prototype.withBuffer=function(){return Object.assign({notePhotos:this.notePhotos,signature:this.signature,photo:this.photo},this.getJobDetails())},t.prototype.getJobDetails=function(){return{jobId:this.jobId,delivered:this.delivered,note:Object(r.g)(this.note,function(t){return t.toJSON()}),items:this.items,attemptedByDriver:this.attemptedByDriver,attemptedByVehicle:this.attemptedByVehicle,deliveryTime:this.deliveryTime}},t.prototype.trimB64Uri=function(t){if(t=Object(r.l)(t))return t.indexOf(";base64,")?t.split(";base64,").pop():void 0},t.prototype.b64ToBlob=function(t,e){void 0===e&&(e="image/jpeg");if(t=this.trimB64Uri(t)){for(var n=atob(t),o=[],i=0;i<n.length;i+=512){for(var r=n.slice(i,i+512),a=new Array(r.length),s=0;s<r.length;s++)a[s]=r.charCodeAt(s);var u=new Uint8Array(a);o.push(u)}return new Blob(o,{type:e})}},t}()},91:function(t,e,n){"use strict";n.d(e,"a",function(){return r});n(2),n(24);var o=n(28),i=n(25),r=function(){function t(t){var e=this;this.platform=t,this.apiMethod="POST",this.apiRootProperty="record",this.apiFormat='{\n        "Lat": "<%= latitude %>",\n        "Lng": "<%= longitude %>",\n        "Accuracy": "<%= accuracy %>",\n        "RecordedTime": "<%= timestamp %>"\n    }',this.geolocationOptions={desiredAccuracy:0,distanceFilter:10,stationaryRadius:25,debug:!1,reset:!0,logLevel:"LOG_LEVEL_OFF",pausesLocationUpdatesAutomatically:!1,activityRecognitionInterval:1e4,stopTimeout:5,stopOnTerminate:!1,startOnBoot:!0,heartbeatInterval:60,preventSuspend:!0,locationAuthorizationRequest:"Always",foregroundService:!0,fastestLocationUpdateInterval:5e3,allowIdenticalLocations:!0,autoSync:i.a.features.enableGeoTracking,httpTimeout:2e4,method:this.apiMethod,httpRootProperty:this.apiRootProperty,locationTemplate:this.apiFormat,batchSync:!0,maxBatchSize:5e3,maxDaysToPersist:2,schedule:["1-7 7:00-23:00"]},this.platform.ready().then(function(){var t=window.BackgroundGeolocation;void 0!==t&&(e.bgGeo=t,e.bgGeo.on("location",function(t){return console.log("[LOCATION] onLocation",t)},function(t){return console.log("[LOCATION] onLocation",t)}),e.bgGeo.on("http",function(t){return console.log("[LOCATION] onHttp",t)},function(t){return console.log("[LOCATION] onHttpErr",t)}))})}return t.prototype.start=function(t,e,n){var o=this;if(void 0!==this.bgGeo&&!0===i.a.features.enableGeoTracking){var r=Object.assign({},this.geolocationOptions,{url:i.a.url+"/rest/data/v2.1/vehicleLog",headers:(a={},a[i.a.default.apiHeader]=i.a.user.token,a),extras:{VehicleId:t,PlateNumber:e,VehicleUserGroup:n}});this.bgGeo.setConfig(r).then(function(){o.bgGeo.start()}).catch(function(t){return console.log("[LOCATION] Unable to start background tracking.",t)})}var a},t.prototype.stop=function(){void 0!==this.bgGeo&&!0===i.a.features.enableGeoTracking&&this.bgGeo.stop()},t.prototype.getCurrentLocation=function(){return void 0!==this.bgGeo?this.bgGeo.getCurrentPosition({samples:1}).then(function(t){return{coords:{latitude:Object(o.c)(t,"coords.latitude"),longitude:Object(o.c)(t,"coords.longitude"),accuracy:Object(o.c)(t,"coords.accuracy")}}}):Promise.resolve({coords:{latitude:void 0,longitude:void 0,accuracy:void 0}})},t}()},92:function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s});n(2);var o,i=n(410),r=(n.n(i),n(25));!function(t){t.Create="create",t.Update="update",t.Delete="delete",t.Attempted="attempted"}(o||(o={}));var a;!function(t){t.DeliveryMaster="DeliveryMaster",t.DeliveryDetail="DeliveryDetail",t.DeliveryItem="DeliveryItem",t.DeliveryPlan="DeliveryPlan",t.Vehicle="Vehicle",t.Logout="logout"}(a||(a={}));var s=function(){function t(){this.eventsToCreate=[]}return t.prototype.connect=function(){var t=this;if(!1!==r.a.features.enableWebsocket)if(void 0!==this.socket&&!0===this.socket.connected)console.log("[WEBSOCKET] Already connected to websocket");else{var e=r.a.url;r.a.default.setApiHeader&&(e+="?"+r.a.default.apiHeader+"="+r.a.user.token),console.log("[WEBSOCKET] Connecting to "+e),this.socket=i(e),this.eventsToCreate.length&&(this.eventsToCreate.forEach(function(e){return t.onJSON(e.name,e.successFn,e.errorFn)}),this.eventsToCreate=[])}},t.prototype.disconnect=function(){!1!==r.a.features.enableWebsocket&&void 0!==this.socket&&!0===this.socket.connected&&this.socket.disconnect()},t.prototype.onJSON=function(t,e,n){!1===r.a.features.enableWebsocket||this.socket.hasListeners(t)||(this.socket?this.socket.on(t,function(o){try{var i=JSON.parse(o);console.log("[WEBSOCKET] Event: ("+t+"). Message:",i),e&&e(i)}catch(e){console.log("[WEBSOCKET] Event: ("+t+"). Message:",o,e),n&&n(e)}}):this.eventsToCreate.push({name:t,successFn:e,errorFn:n}))},t}()}},[370]);